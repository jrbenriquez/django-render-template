{% extends "account/base.html" %}
{% load i18n static %}

{% block title %}
  Password Reset
{% endblock %}

{% block header %}
{% endblock header %}

{% block card_title %}
<center>
  <a href="/">
    <img src="{% static 'img/icon.svg' %}" class="h-16 w-auto mb-6" alt="ZeroBadger logo" />
    Set New Password
  </a>
</center>
{% endblock %}

{% block inner_content %}
<form method="post" action="{{ action_url }}" class="space-y-6">
  {% csrf_token %}

  {% if token_fail %}
    <p class="text-sm text-red-600 text-center">
      The password reset link is invalid, possibly because it has already been used. 
      Please request a new password reset.
    </p>

    <div class="text-center mt-6">
      <a href="{% url 'account_reset_password' %}" class="button w-full">
        Request New Password Reset
      </a>
    </div>
  {% else %}
    {% for field in form %}
      <div>
        {{ field.label_tag }}
        {{ field }}
        {% if field.errors %}
          <p class="text-sm text-red-600 mt-1">{{ field.errors|striptags }}</p>
        {% endif %}
      </div>
    {% endfor %}

    <button type="submit" class="button w-full">
      Set Password
    </button>
  {% endif %}
</form>
{% endblock inner_content %}
